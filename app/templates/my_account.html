{% extends "base.html" %}

{% block content %}
<div class="container main-container">
	<div class="row header-row">
		<div class="col header-col mb-3">
			<!-- main header -->
			<h1 class="center">Account Settings</h1><br>
		</div>
	</div>
</div>

<!-- Update username section -->
<form onkeypress="return event.keyCode != 13;" method="post">
  {{ name_form.hidden_tag() }}
  <div>
	Username:
	<!-- Name entry field -->
	<span onchange="namelen_check()">
	  {{ name_form.username(placeholder=current_user.username) }}
	</span>
	<!-- Name update button -->
	<span onclick="return confirm('confirm update username')">
	  {{ name_form.update_name(disabled="") }}
	</span>
	<!-- Flash error messages -->
	{% for error in name_form.username.errors %}
	<br><span style="color: red;">[{{ error }}]</span>
	{% endfor %}
  </div>

  <script>
	function namelen_check() {
		let namelen = document.getElementById('username').value.length;
		let button = document.getElementById('update_name');
		if (namelen > 0) {
			$(button).prop('disabled', false);
		} else {
			$(button).prop('disabled', true);
		}
	}
  </script>
</form>
<br>

<!-- Update username section -->
<form onkeypress="return event.keyCode != 13;" method="post">
  {{ email_form.hidden_tag() }}
  <div>
	Email:
	<!-- Email entry field -->
	<span onchange="email_len_check()">
	  {{ email_form.email(placeholder=current_user.email) }}
	</span>
	<!-- Email update button -->
	<span onclick="return confirm('confirm update email')">
	  {{ email_form.update_email(disabled="") }}
	</span>
	<!-- Flash error messages -->
	{% for error in email_form.email.errors %}
	<br><span style="color: red;">[{{ error }}]</span>
	{% endfor %}
  </div>

  <script>
	function email_len_check() {
		let email_len = document.getElementById('email').value.length;
		let button = document.getElementById('update_email');
		if (email_len > 0) {
			$(button).prop('disabled', false);
		} else {
			$(button).prop('disabled', true);
		}
	}
  </script>
</form>




<br><br><br><br><br>
{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
            <span style="color: red;">{{ message }}</span>
        {% endfor %}
    {% endif %}
{% endwith %}

{% endblock %}
